(this["webpackJsonppoker-game-final"]=this["webpackJsonppoker-game-final"]||[]).push([[0],{13:function(t,e,a){},20:function(t,e,a){},22:function(t,e,a){"use strict";a.r(e);var n=a(1),s=a.n(n),r=a(15),i=a.n(r),o=(a(20),a(6)),c=a(7),h=a(11),l=a(10),u=(a(13),a(8)),d=a(14),p=a(5),b=a(2),f=a(4),g=a(0);var j=function(t){return Object(g.jsx)("img",{src:"./cards/"+t.rank+"_of_"+t.suit+".png",class:"center",width:"100",height:"150"})};var v=function(t){for(var e=[],a=0;a<t.numRevealed;a++)e.push(t.cards[a]);return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Table"}),Object(g.jsx)("div",{children:e}),Object(g.jsxs)("h3",{children:["Pot: ",t.pot]})]})};var y=function(t){return t.folded?Object(g.jsxs)("div",{children:[Object(g.jsxs)("h3",{children:["Player",t.id," [",t.position,"] ",t.message," [Chips:",t.chips,"] [Bet:",t.bet,"]"]}),Object(g.jsx)("hr",{})]}):Object(g.jsxs)("div",{children:[Object(g.jsxs)("h3",{children:["Player",t.id," [",t.position,"] [Chips:",t.chips,"] [Bet:",t.bet,"] ",t.message," ",t.raised>0&&Object(g.jsxs)("div",{children:["Raise bet to:",t.raised+t.bet]})]}),t.turn&&Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{children:[t.cards," ",t.strengths[t.round]]}),Object(g.jsx)("button",{onClick:function(){return t.action(t.id,"Check/Call")},children:"Check/Call"}),Object(g.jsx)("button",{onClick:function(){return t.action(t.id,"Fold")},children:"Fold"}),t.bet+t.raised>t.highestBet&&Object(g.jsx)("button",{onClick:function(){return t.action(t.id,"Raise")},children:"Raise"}),Object(g.jsx)("button",{onClick:function(){return t.action(t.id,"Increase")},children:"Increase bet amount"})]}),Object(g.jsx)("hr",{})]})};function O(){for(var t,e=w,a=e.length;0!==a;){t=Math.floor(Math.random()*a),a--;var n=[e[t],e[a]];e[a]=n[0],e[t]=n[1]}return e}function k(t,e){var a,n,s,r=1<<t[0]|1<<t[1]|1<<t[2]|1<<t[3]|1<<t[4];for(n=-1,a=s=0;n<5;n++,s=Math.pow(2,4*t[n]))a+=s*(1+(a/s&15));return a=a%15-(r/(r&-r)==31||16444==r?3:1),["4 of a Kind","Straight Flush","Straight","Flush","High Card","1 Pair","2 Pair","Royal Flush","3 of a Kind","Full House"][a-=(e[0]==(e[1]|e[2]|e[3]|e[4]))*(31744==r?-5:1)]}var x={"High Card":0,"1 Pair":1,"2 Pair":2,"3 of a Kind":3,Straight:4,Flush:5,"Full House":6,"4 of a Kind":7,"Straight Flush":8,"Royal Flush":9};function m(t,e){var a=[],n=[t[0].rank,t[1].rank],s=[t[0].suit,t[1].suit],r=[e[0].rank,e[1].rank,e[2].rank,e[3].rank,e[4].rank],i=[e[0].suit,e[1].suit,e[2].suit,e[3].suit,e[4].suit];a.push(n[0]===n[1]?"1 Pair":"High Card");var o=k(n.concat(r.slice(0,3)),s.concat(i.slice(0,3)));a.push(o);for(var c=0,h=[[0,1,3],[0,2,3],[1,2,3]];c<h.length;c++){var l=h[c],u=k(n.concat([r[l[0]],r[l[1]],r[l[2]]]),s.concat([i[l[0]],i[l[1]],i[l[2]]]));x[u]>x[o]&&(o=u)}a.push(o);for(var d=0,p=[[0,1,4],[0,2,4],[0,3,4],[1,2,4],[1,3,4],[2,3,4]];d<p.length;d++){var b=p[d],f=k(n.concat([r[b[0]],r[b[1]],r[b[2]]]),s.concat([i[b[0]],i[b[1]],i[b[2]]]));x[f]>x[o]&&(o=f)}return a.push(o),a.push(o),a}function P(t,e,a){return 10*(e[0].rank+e[1].rank+a[0].rank+a[1].rank+a[2].rank+a[3].rank+a[4].rank)+Math.pow(10,x[t])}var w=function(){for(var t=[],e=["2","3","4","5","6","7","8","9","10","jack","queen","king","ace"],a=["clubs","hearts","diamonds","spades"],n=[2,3,4,5,6,7,8,9,10,11,12,13,14],s=[1,4,2,8],r=0,i=a;r<i.length;r++){var o,c=i[r],h=Object(f.a)(e);try{for(h.s();!(o=h.n()).done;){var l=o.value;t.push({image:Object(g.jsx)(j,{rank:l,suit:c}),rank:n[e.indexOf(l)],suit:s[a.indexOf(c)]})}}catch(u){h.e(u)}finally{h.f()}}return t}(),C=["PreFlop","Flop","Turn","River","Showdown"],R=60,B=["Button","SB","BB"],D=function(t){Object(h.a)(a,t);var e=Object(l.a)(a);function a(){var t;return Object(o.a)(this,a),(t=e.call(this)).state={numPlayers:5,button:0,currPlayer:3,deck:O(),round:0,nowPlaying:[],highestBet:120,playersData:[],tableData:null,winnerId:null,message:null,nextPlayer:!1},t.playerResponded=t.playerResponded.bind(Object(b.a)(t)),t.newRound=t.newRound.bind(Object(b.a)(t)),t.onNextPlayer=t.onNextPlayer.bind(Object(b.a)(t)),t.initializeGame(),t}return Object(c.a)(a,[{key:"getTwoCards",value:function(t,e){return[e[t],e[51-t]]}},{key:"findWinner",value:function(t,e){var a,n=t,s=e,r=s[n[0]].strengthValue,i=Object(f.a)(n);try{for(i.s();!(a=i.n()).done;){var o=a.value;s[o].strengthValue>r&&(r=s[o].strengthValue)}}catch(d){i.e(d)}finally{i.f()}var c,h=[],l=Object(f.a)(n);try{for(l.s();!(c=l.n()).done;){var u=c.value;s[u].strengthValue===r&&h.push(u)}}catch(d){l.e(d)}finally{l.f()}return h}},{key:"initializeGame",value:function(){for(var t=[],e=[],a=0;a<5;a++){var n=this.state.deck[26+a*Math.pow(-1,a)];t.push(n.image),e.push(n)}this.state.tableData={cards:t,pot:180,numRevealed:0};for(var s=[],r=this.state.numPlayers,i=0;i<r;i++){var o=null,c=0,h=1200,l=this.state.button;l===i&&(o=B[0]),l+1!==i&&l+1-r!==i||(o=B[1],h-=c=R),l+2!==i&&l+2-r!==i||(o=B[2],h-=c=120);var u=this.getTwoCards(i,this.state.deck),d=[u[0].image,u[1].image],p=m(u,e);s.push({id:i,position:o,chips:h,bet:c,message:null,cards:d,turn:!1,action:this.playerResponded,folded:!1,strengths:p,strengthValue:P(p[4],u,e),raised:0})}for(var b=this.state.currPlayer;b<s.length;b++)this.state.nowPlaying.push(b);for(var f=0;f<this.state.currPlayer;f++)this.state.nowPlaying.push(f);s[this.state.currPlayer].turn=!0,this.state.playersData=s}},{key:"newRound",value:function(){var t=O(),e=Object(p.a)(this.state.playersData),a=[],n=Object(d.a)({},this.state.tableData),s=null;e[this.state.button].position=null,n.numRevealed=0;for(var r,i=[],o=[],c=0;c<5;c++){var h=this.state.deck[26+c*Math.pow(-1,c)];i.push(h.image),o.push(h)}n.cards=i,n.pot=180;for(var l=this.state.button+1;l<e.length;l++)if(0!==e[l].chips){s=l;break}if(!s)for(var b=0;b<this.state.button;b++)if(0!==e[b].chips){s=b;break}for(var f=s;f<e.length;f++)0!==e[f].chips&&a.push(e[f].id);for(var g=0;g<s;g++)0!==e[g].chips&&a.push(e[g].id);a.length>3?(r=3,e[a[0]].position=B[0],e[a[1]].position=B[1],e[a[2]].position=B[2]):a.length>1&&(r=0,3===a.length?(e[a[0]].position=B[0],e[a[1]].position=B[1],e[a[2]].position=B[2]):(e[a[0]].position=B[1],e[a[1]].position=B[2]));for(var j=[],v=r;v<a.length;v++)j.push(a[v]);for(var y=0;y<r;y++)j.push(a[y]);for(var k=0,x=a=j;k<x.length;k++){var w=x[k],C=this.getTwoCards(w,t),D=[C[0].image,C[1].image];e[w].cards=D,e[w].message=null,e[w].turn=w===a[0],e[w].folded=!1,e[w].bet=0;var S=m(C,o);e[w].strengths=S,e[w].strengthValue=P(S,C,o),e[w].raised=0,"SB"===e[w].position?(e[w].bet=R,e[w].chips-=R):"BB"===e[w].position&&(e[w].bet=120,e[w].chips-=120)}this.setState(Object(u.a)({numPlayers:5,round:0,playersData:e,nowPlaying:a,tableData:n,highestBet:0,deck:t,currPlayer:a[r]},"highestBet",120))}},{key:"onNextPlayer",value:function(){var t=Object(p.a)(this.state.playersData);t[this.state.currPlayer].turn=!0,this.setState({playersData:t,nextPlayer:!1})}},{key:"playerResponded",value:function(t,e){var a=Object(p.a)(this.state.playersData),n=a[t],s=this.state.highestBet;if("Increase"===e)n.bet+n.raised<n.chips&&(n.raised+=R,n.bet+n.raised===n.chips&&(n.message="All in")),n.bet+n.raised<s&&(n.raised=s-n.bet+R),this.setState({playersData:a});else{var r,i=Object(d.a)({},this.state.tableData),o=Object(p.a)(this.state.nowPlaying),c=this.state.round,h=o.indexOf(t);if(h===o.length-1?(r=o[0],c+=1):r=o[h+1],"Fold"===e){n.folded=!0,n.message="folded",o.splice(o.indexOf(t),1);var l=0;if("SB"===n.position?l=R:"BB"===n.position&&(l=120),i.pot+=n.bet-l,n.chips-=n.bet-l,1===o.length){a[o[0]].chips+=i.pot;var u="Player"+o[0].toString()+" won the pot of "+i.pot.toString()+" chips!!!";return i.pot=0,void this.setState({playersData:a,tableData:i,currPlayer:r,nowPlaying:o,round:4,message:u})}}else{if("Check/Call"===e){var b=s-n.bet;b+n.bet>=n.chips&&(b=n.chips-n.bet,n.message="All in"),n.bet+=b,i.pot+=b,n.chips-=b}else n.chips-=n.raised,i.pot+=n.raised,n.bet+=n.raised,s=n.bet;n.raised=0}n.turn=!1;var g="";if(c!==this.state.round)if(1===c)i.numRevealed=3;else if(2===c)i.numRevealed=4;else if(3===c)i.numRevealed=5;else{var j=this.findWinner(o,a);if(1===j.length)g="Player"+j[0].toString()+" won the pot of "+i.pot.toString()+" chips!!!",a[j[0]].chips+=i.pot;else{var v,y=i.pot/j.length,O=Object(f.a)(j);try{for(O.s();!(v=O.n()).done;){var k=v.value;a[k].chips+=y,g+="Player"+k.toString()+", "}}catch(x){O.e(x)}finally{O.f()}g+="share the pot of "+i.pot.toString()+" chips!!!"}i.pot=0}this.setState({playersData:a,tableData:i,currPlayer:r,nowPlaying:o,round:c,message:g,highestBet:s,nextPlayer:!0})}}},{key:"render",value:function(){var t=this,e=this.state.playersData.map((function(e){return Object(g.jsx)(y,{id:e.id,position:e.position,chips:e.chips,bet:e.bet,highestBet:t.state.highestBet,message:e.message,cards:e.cards,turn:e.turn,action:e.action,folded:e.folded,strengths:e.strengths,round:t.state.round,raised:e.raised})})),a=this.state.tableData,n=Object(g.jsx)(v,{cards:a.cards,pot:a.pot,numRevealed:a.numRevealed}),s=Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:this.state.message}),Object(g.jsx)("button",{onClick:this.newRound,children:"New Deck"})]}),r=Object(g.jsxs)("h4",{children:["Current Player:",this.state.currPlayer," Betting Round:",C[this.state.round]]});return Object(g.jsxs)("div",{children:[Object(g.jsx)("hr",{}),n,Object(g.jsx)("hr",{}),e,4===this.state.round?s:r,this.state.nextPlayer&&Object(g.jsx)("button",{onClick:this.onNextPlayer,children:"Next Player"})]})}}]),a}(s.a.Component),S=function(t){Object(h.a)(a,t);var e=Object(l.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"POKER"}),Object(g.jsx)(D,{})]})}}]),a}(s.a.Component),F=S,M=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,23)).then((function(e){var a=e.getCLS,n=e.getFID,s=e.getFCP,r=e.getLCP,i=e.getTTFB;a(t),n(t),s(t),r(t),i(t)}))};i.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(F,{})}),document.getElementById("root")),M()}},[[22,1,2]]]);
//# sourceMappingURL=main.d00a76a7.chunk.js.map